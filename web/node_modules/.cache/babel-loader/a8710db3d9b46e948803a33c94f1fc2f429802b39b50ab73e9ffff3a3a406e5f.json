{"ast":null,"code":"import React,{useEffect,useState}from'react';import{RefreshCw,Eye,Calendar,Clock,CheckCircle,AlertCircle}from'lucide-react';import{workflowApi}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Sessions=()=>{const[sessions,setSessions]=useState([]);const[loading,setLoading]=useState(true);const[selectedSession,setSelectedSession]=useState(null);const[showModal,setShowModal]=useState(false);const fetchSessions=async()=>{try{setLoading(true);const data=await workflowApi.listWorkflowSessions();setSessions(data);}catch(error){console.error('Error fetching sessions:',error);}finally{setLoading(false);}};useEffect(()=>{fetchSessions();},[]);const handleViewSession=async sessionId=>{try{const session=await workflowApi.getWorkflowSession(sessionId);setSelectedSession(session);setShowModal(true);}catch(error){console.error('Error fetching session details:',error);alert('Failed to load session details');}};const getStatusIcon=status=>{switch(status){case'completed':return/*#__PURE__*/_jsx(CheckCircle,{className:\"w-5 h-5 text-green-500\"});case'running':return/*#__PURE__*/_jsx(Clock,{className:\"w-5 h-5 text-blue-500 animate-spin\"});case'failed':return/*#__PURE__*/_jsx(AlertCircle,{className:\"w-5 h-5 text-red-500\"});default:return/*#__PURE__*/_jsx(Clock,{className:\"w-5 h-5 text-gray-500\"});}};const getStatusColor=status=>{switch(status){case'completed':return'bg-green-100 text-green-800';case'running':return'bg-blue-100 text-blue-800';case'failed':return'bg-red-100 text-red-800';default:return'bg-gray-100 text-gray-800';}};const formatDate=dateString=>{return new Date(dateString).toLocaleString();};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Workflow Sessions\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600\",children:\"View and manage your workflow execution sessions\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:fetchSessions,className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"w-4 h-4 mr-2\"}),\"Refresh\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow overflow-hidden\",children:sessions.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 text-center text-gray-500\",children:[/*#__PURE__*/_jsx(Clock,{className:\"w-12 h-12 mx-auto mb-4 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No sessions found\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Start by running a workflow to see sessions here.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Session ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Workflow\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Created\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Updated\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:sessions.map(session=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900\",children:[session.session_id.substring(0,8),\"...\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:session.workflow_name}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[getStatusIcon(session.status),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full \".concat(getStatusColor(session.status)),children:session.status})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4 mr-1\"}),formatDate(session.created_at)]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4 mr-1\"}),formatDate(session.updated_at)]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleViewSession(session.session_id),className:\"inline-flex items-center text-primary-600 hover:text-primary-900\",children:[/*#__PURE__*/_jsx(Eye,{className:\"w-4 h-4 mr-1\"}),\"View\"]})})]},session.session_id))})]})})}),showModal&&selectedSession&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative top-20 mx-auto p-5 border w-3/4 max-w-4xl shadow-lg rounded-md bg-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:[\"Session Details: \",selectedSession.session_id]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setShowModal(false);setSelectedSession(null);},className:\"text-gray-400 hover:text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Close\"}),/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-900 mb-2\",children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4 grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:\"Workflow:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:selectedSession.workflow_name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:\"Status:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mt-1\",children:[getStatusIcon(selectedSession.status),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full \".concat(getStatusColor(selectedSession.status)),children:selectedSession.status})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:\"Created:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:formatDate(selectedSession.created_at)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:\"Updated:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:formatDate(selectedSession.updated_at)})]})]})]}),selectedSession.variables&&Object.keys(selectedSession.variables).length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-900 mb-2\",children:\"Variables\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"bg-gray-50 rounded-lg p-4 text-sm overflow-auto\",children:JSON.stringify(selectedSession.variables,null,2)})]}),selectedSession.result&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-900 mb-2\",children:\"Results\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"bg-gray-50 rounded-lg p-4 text-sm overflow-auto max-h-64\",children:JSON.stringify(selectedSession.result,null,2)})]}),selectedSession.error_message&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-red-900 mb-2\",children:\"Error Message\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 rounded-lg p-4 text-sm text-red-800\",children:selectedSession.error_message})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowModal(false);setSelectedSession(null);},className:\"px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",children:\"Close\"})})]})})]});};export default Sessions;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}