{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Play,Plus}from'lucide-react';import{workflowApi}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Workflows=()=>{const[workflows,setWorkflows]=useState(null);const[loading,setLoading]=useState(true);const[runningWorkflow,setRunningWorkflow]=useState(null);const[showRunModal,setShowRunModal]=useState(null);const[variables,setVariables]=useState('{}');useEffect(()=>{const fetchWorkflows=async()=>{try{const data=await workflowApi.listWorkflows();setWorkflows(data);}catch(error){console.error('Error fetching workflows:',error);}finally{setLoading(false);}};fetchWorkflows();},[]);const handleRunWorkflow=async workflowName=>{try{setRunningWorkflow(workflowName);let parsedVariables={};try{parsedVariables=JSON.parse(variables);}catch(e){alert('Invalid JSON in variables field');return;}const request={workflow:workflowName,variables:parsedVariables};const response=await workflowApi.runWorkflow(request);alert(\"Workflow started successfully! Session ID: \".concat(response.session_id));setShowRunModal(null);setVariables('{}');}catch(error){console.error('Error running workflow:',error);alert('Failed to run workflow');}finally{setRunningWorkflow(null);}};const WorkflowCard=_ref=>{let{name,workflow,type}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:name}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:workflow.description||'No description available'}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \".concat(type==='config'?'bg-blue-100 text-blue-800':'bg-green-100 text-green-800'),children:type==='config'?'Custom':'Built-in'})})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowRunModal(name),disabled:runningWorkflow===name,className:\"ml-4 inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50\",children:[/*#__PURE__*/_jsx(Play,{className:\"w-4 h-4 mr-2\"}),runningWorkflow===name?'Running...':'Run']})]})});};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Workflows\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600\",children:\"Manage and run your curriculum curation workflows\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4 mr-2\"}),\"Create Workflow\"]})]}),(workflows===null||workflows===void 0?void 0:workflows.predefined_workflows)&&Object.keys(workflows.predefined_workflows).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Built-in Workflows\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:Object.entries(workflows.predefined_workflows).map(_ref2=>{let[name,workflow]=_ref2;return/*#__PURE__*/_jsx(WorkflowCard,{name:name,workflow:workflow,type:\"predefined\"},name);})})]}),(workflows===null||workflows===void 0?void 0:workflows.config_workflows)&&Object.keys(workflows.config_workflows).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Custom Workflows\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:Object.entries(workflows.config_workflows).map(_ref3=>{let[name,workflow]=_ref3;return/*#__PURE__*/_jsx(WorkflowCard,{name:name,workflow:workflow,type:\"config\"},name);})})]}),(!(workflows!==null&&workflows!==void 0&&workflows.predefined_workflows)||Object.keys(workflows.predefined_workflows).length===0)&&(!(workflows!==null&&workflows!==void 0&&workflows.config_workflows)||Object.keys(workflows.config_workflows).length===0)&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No workflows found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:\"Create your first workflow or check your configuration file.\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4 mr-2\"}),\"Create Workflow\"]})]})}),showRunModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:[\"Run Workflow: \",showRunModal]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Variables (JSON)\"}),/*#__PURE__*/_jsx(\"textarea\",{value:variables,onChange:e=>setVariables(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500\",rows:4,placeholder:\"{\\\"key\\\": \\\"value\\\"}\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleRunWorkflow(showRunModal),disabled:runningWorkflow===showRunModal,className:\"flex-1 inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50\",children:[/*#__PURE__*/_jsx(Play,{className:\"w-4 h-4 mr-2\"}),runningWorkflow===showRunModal?'Running...':'Run Workflow']}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowRunModal(null);setVariables('{}');},className:\"flex-1 inline-flex justify-center items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",children:\"Cancel\"})]})]})})})]});};export default Workflows;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}