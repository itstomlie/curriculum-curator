{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Activity,Clock,CheckCircle,AlertCircle}from'lucide-react';import{workflowApi,healthApi}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const[sessions,setSessions]=useState([]);const[health,setHealth]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const fetchData=async()=>{try{const[sessionsData,healthData]=await Promise.all([workflowApi.listWorkflowSessions(),healthApi.checkHealth()]);setSessions(sessionsData);setHealth(healthData);}catch(error){console.error('Error fetching dashboard data:',error);}finally{setLoading(false);}};fetchData();},[]);const getStatusIcon=status=>{switch(status){case'completed':return/*#__PURE__*/_jsx(CheckCircle,{className:\"w-5 h-5 text-green-500\"});case'running':return/*#__PURE__*/_jsx(Clock,{className:\"w-5 h-5 text-blue-500\"});case'failed':return/*#__PURE__*/_jsx(AlertCircle,{className:\"w-5 h-5 text-red-500\"});default:return/*#__PURE__*/_jsx(Clock,{className:\"w-5 h-5 text-gray-500\"});}};const getStatusColor=status=>{switch(status){case'completed':return'bg-green-100 text-green-800';case'running':return'bg-blue-100 text-blue-800';case'failed':return'bg-red-100 text-red-800';default:return'bg-gray-100 text-gray-800';}};const stats={total:sessions.length,completed:sessions.filter(s=>s.status==='completed').length,running:sessions.filter(s=>s.status==='running').length,failed:sessions.filter(s=>s.status==='failed').length};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600\",children:\"Overview of your curriculum curation workflows\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium \".concat((health===null||health===void 0?void 0:health.status)==='healthy'?'bg-green-100 text-green-800':'bg-red-100 text-red-800'),children:[/*#__PURE__*/_jsx(Activity,{className:\"w-4 h-4 mr-2\"}),(health===null||health===void 0?void 0:health.message)||'API Status Unknown']})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(Activity,{className:\"w-8 h-8 text-gray-500\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Total Sessions\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:stats.total})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(CheckCircle,{className:\"w-8 h-8 text-green-500\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Completed\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:stats.completed})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(Clock,{className:\"w-8 h-8 text-blue-500\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Running\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:stats.running})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(AlertCircle,{className:\"w-8 h-8 text-red-500\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Failed\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:stats.failed})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900\",children:\"Recent Sessions\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-hidden\",children:sessions.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"p-6 text-center text-gray-500\",children:\"No workflow sessions found. Start by running a workflow!\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Session\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Workflow\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Created\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:sessions.slice(0,10).map(session=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",children:[session.session_id.substring(0,8),\"...\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:session.workflow_name}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[getStatusIcon(session.status),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full \".concat(getStatusColor(session.status)),children:session.status})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:new Date(session.created_at).toLocaleDateString()})]},session.session_id))})]})})]})]});};export default Dashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}